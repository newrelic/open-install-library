---
- debug:
    msg: Install go

- name: Create templates directory
  file:
    path: /home/ec2-user/javaApp
    state: directory

- name: Copy file to remove
  ansible.builtin.copy:
      src: ../../../../templates/javaApp
      dest: /home/ec2-user/javaApp
      mode: push
  become: true

- name: Change the permissions of the tomcat directory
  shell: chmod 755 /opt/tomcat/latest/webapps
  become: true

- name: Change the permissions of the tomcat bin 
  shell: chmod -R 755 /opt/tomcat/latest/bin
  become: true

- name: Deploy the javaApp
  shell: mvn clean package -f /home/ec2-user/javaApp/pom.xml
  become: true

- name: Move the package
  shell: mv /home/ec2-user/javaApp/target/javaApp.war /opt/tomcat/latest/webapp 
  become: true

