---
- debug:
    msg: Install ASP.NET Core 10 Runtime

# - name: Get package name
#   shell: cat /etc/os-release | grep "PRETTY_NAME=\"" | awk -F = '{print $2}' | awk -F " " '{print $1}' | sed 's/["]//g'
#   register: package_name

# - name: Get package version
#   shell: cat /etc/os-release | grep "VERSION_ID=\"" | awk -F = '{print $2}' | awk -F " " '{print $1}' | sed 's/["]//g'
#   register: package_version

# - name:
#   set_fact:
#     package_url: "https://packages.microsoft.com/config/{{package_name.stdout | lower }}/{{package_version.stdout | lower }}/packages-microsoft-prod.deb"

# - debug:
#     msg: "Using download URL of {{package_url}}"

# - name: Download Microsoft package signing key and add Microsoft package repository
#   shell: |
#     wget "{{package_url}}" -O packages-microsoft-prod.deb
#     dpkg -i packages-microsoft-prod.deb
#   become: true

- name: Install dependencies
  shell: |
    apt update
    apt install -y wget libicu76
  become: true

- name: Install ASP.NET Core 10 Runtime
  shell: |
    wget https://dot.net/v1/dotnet-install.sh -O dotnet-install.sh
    chmod +x dotnet-install.sh
    ./dotnet-install.sh --runtime aspnetcore --version 10.0.0
  become: true
